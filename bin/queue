#!/usr/bin/env php
<?php

declare(strict_types=1);

use Psr\Log\LoggerInterface;
use Symfony\Component\Console\Application;
use Yiisoft\Di\Container;
use Yiisoft\Di\ContainerConfig;

require_once './vendor/autoload.php';

/** @var array $definitions */
$definitions = require_once 'definitions.php';

$containerConfig = ContainerConfig::create()->withDefinitions($definitions);
$container = new Container($containerConfig);

if ($container->has(LoggerInterface::class) === false) {
    throw new RuntimeException(
        'Logger is not configured, install your logger of choice and configure it properly in /bin/definitions.php.'
    );
}

/** @var Application $application */
$application = $container->get(Application::class);
$application->run();
